<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://java.sun.com/jsf/composite">
    <head>
        <meta charset="UTF-8">
        <title>Cool Surveys - Admin</title>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" defer></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js" type="text/javascript"></script>
        <script src= "./admin.js" defer></script>
        <link rel="stylesheet" type="text/css" href="./style.css">
    </head>
    <body>
        <div id="admin">
            <div id="surveyCreation" v-if = "surveyCreation">
                <h1>Create New Survey</h1>
                     <div id= "surveyDiv" v-for="(input, questionIndex) in questions" :key="`questionInput-${questionIndex}`">

                        <form v-on:reset.prevent="removeQuestion(questionIndex, questions)" v-on:submit.prevent="addQuestion(input, questions, questionIndex)">
                            <div class="form-field">
                                <label class="question">Question{{questionIndex + 1}}:</label>
                                <input type="text" v-model="input.question" placeholder="enter new question" required><br>
                                <div class = "buttons">
                                    <button type="button" v-on:click="multipleChoice = true">Multiple choice</button>
                                    <button type="button" v-on:click="setOpenAnswer(questionIndex, options)">Open answer</button>
                                </div>
                            </div>
                            <br> <label class="question" v-if="options[questionIndex]!=null && options[questionIndex].length <= 4 && multipleChoice">Optional multiple options:</label> <br>
                            <div v-if="options[questionIndex]!=null && options[questionIndex].length <= 4 && multipleChoice" v-for="(input, optionIndex) in options[questionIndex]" :key="`optionInput-${optionIndex}`" class="form-field">
                                <label class="question">Option{{optionIndex + 1}}:</label>
                                <input type="text" v-model="input.option" placeholder="enter new option" required><br>
                                <div class = "buttons">
                                    <button type="button" v-on:click="addOption(input, options[questionIndex], optionIndex)">Add option</button>
                                    <button type="button" v-show="options[questionIndex].length > 1" v-on:click="removeOption(questionIndex, options[questionIndex])">Remove option</button>
                                </div>
                            </div>
                            <br> <label v-if="options[questionIndex]!=null && options[questionIndex].length > 4 && multipleChoice">Max number of options reached.</label> <br>
                            <label v-if="questionAdded[questionIndex] === true">Question added to survey</label><br>
                            <div class = "buttons">
                                <button type="submit" v-if="questionAdded[questionIndex] !== true">Add question</button>
                                <button v-show="questions.length > 1" type="reset">Remove question</button><br>
                            </div>
                        </form>

                    </div>

                <div id="addSurveyForm">
                    <form v-on:submit.prevent="submitQuestionsForm" method="post">
                        <div class = "buttons">
                            <button type="submit">Send survey</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </body>
</html>